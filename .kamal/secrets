# Secrets defined here are available for reference under registry/password, env/secret, builder/secrets,
# and accessories/*/env/secret in config/deploy.yml. All secrets should be pulled from either
# password manager, ENV, or a file. DO NOT ENTER RAW CREDENTIALS HERE! This file needs to be safe for git.

# The .kamal/secrets file is gitignored and will NOT be committed.

# OPTION 1: Source from .env file (recommended)
# Uncomment the line below to load variables from .env.kamal
# export $(grep -v '^#' .env.kamal | xargs)

# OPTION 2: Pull from environment variables (requires setting them before running kamal)
# OPTION 3: Read directly from files (like config/master.key below)

# Load .env.kamal using eval to avoid subshell issues
eval "$(grep -v '^#' .env | sed 's/^/export /')"

# Docker registry password (use access token, not your actual password)
# For Docker Hub: Create at https://hub.docker.com/settings/security
# For GitHub: Create at https://github.com/settings/tokens (with write:packages scope)
# If using .env.kamal, this pulls from the KAMAL_REGISTRY_PASSWORD variable in that file
KAMAL_REGISTRY_PASSWORD=$KAMAL_REGISTRY_PASSWORD

# Rails master key - reads directly from config/master.key file
RAILS_MASTER_KEY=$(cat config/master.key)

# PostgreSQL password for the database accessory
# If using .env.kamal, this pulls from POSTGRES_PASSWORD in that file
# Otherwise, generate and set here: openssl rand -base64 32
POSTGRES_PASSWORD=$POSTGRES_PASSWORD

# Database URL for your application
# If using .env.kamal, this pulls from DATABASE_URL in that file
# Format: postgresql://username:password@host:port/database
# If using Kamal-managed DB accessory, host should be: spi_production-db
DATABASE_URL=$DATABASE_URL

# Redis URL for Sidekiq
# If using .env.kamal, this pulls from REDIS_URL in that file
# If using Kamal-managed Redis accessory, host should be: spi_production-redis
REDIS_URL=$REDIS_URL